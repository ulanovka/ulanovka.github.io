---
id: 86
title: Проблема со входом на форум
date: 2010-12-04T14:52:53+00:00
author: Mac
layout: post
guid: http://ulanovka.net/?p=86
permalink: /2010/12/%d0%bf%d1%80%d0%be%d0%b1%d0%bb%d0%b5%d0%bc%d0%b0-%d1%81%d0%be-%d0%b2%d1%85%d0%be%d0%b4%d0%be%d0%bc-%d0%bd%d0%b0-%d1%84%d0%be%d1%80%d1%83%d0%bc/
dsq_thread_id:
  - 4888459538
categories:
  - Объявления
tags:
  - apache
  - nginx
  - php-fpm
  - нагрузка
  - ошибка
  - проблема
---
Сегодня получил несколько писем от пользователей с жалобами на невозможность входа на Улановку (_&#171;такого пользователя не существует&#187;_). Как оказалось, проблема заключается во вчерашнем падении сервера. Побилась таблица пользователей, из-за чего несколько учетных записей удалилось. Но успокою вас &#8212; проблема решаема, и в ближайшие часы мы восстановим удаленных пользователей.

Пока же прошу запастись терпением и подождать.

К слову о проблемах сервера. Сегодня в очередной раз анализируя код, нашел вопиющую ошибку в работе страницы профиля пользователя, которая выдавала около 700-800 запросов в базу для отображения форумов, где пользователь наиболее активен, вместо положенных 20-25 запросов. Такая загруженная страница вполне могла ронять сервер, если бы была одновременно открыта большим количеством пользователей. Сейчас проблему устранил полным удалением этой функциональности. Руки бы таким программистам оторвать. Ну я, конечно, не проявил должной внимательности при установке этого функционала.

Сразу сообщу еще об одних масштабных работах с сервером, запланированных на ближайшие дни. Будем проводить полное избавление от сервера Apache в пользу nginx + php-fpm по совету сразу нескольких гуру в одной области, один из которых соадмин известного сайта Тапочек.Нет.

**UPD [08.12.10]**: Все удаленные аккаунты пользователей были успешно восстановлены. Их было 11.